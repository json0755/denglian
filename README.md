# æ™ºèƒ½åˆçº¦å­¦ä¹ é¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªåŸºäº Solidity çš„æ™ºèƒ½åˆçº¦å­¦ä¹ é¡¹ç›®ï¼ŒåŒ…å«å¤šä¸ªè¯¾ç¨‹æ¨¡å—ï¼Œæ¶µç›–äº†ä»åŸºç¡€åˆ°é«˜çº§çš„æ™ºèƒ½åˆçº¦å¼€å‘æ¦‚å¿µã€‚

## é¡¹ç›®ç»“æ„

```
denglian/
â”œâ”€â”€ go.mod                    # Go æ¨¡å—æ–‡ä»¶
â”œâ”€â”€ lession_1/               # ç¬¬ä¸€è¯¾ï¼šGo åŸºç¡€ç»ƒä¹ 
â”‚   â”œâ”€â”€ question_1/
â”‚   â”‚   â””â”€â”€ question_1.go
â”‚   â”œâ”€â”€ question_2/
â”‚   â”‚   â””â”€â”€ question_2.go
â”‚   â””â”€â”€ question_3/
â”œâ”€â”€ lession_2/               # ç¬¬äºŒè¯¾ï¼šåŸºç¡€æ™ºèƒ½åˆçº¦
â”‚   â””â”€â”€ my_contract.sol
â”œâ”€â”€ lession_3/               # ç¬¬ä¸‰è¯¾ï¼šé“¶è¡Œåˆçº¦
â”‚   â””â”€â”€ bank.sol
â”œâ”€â”€ lession_4/               # ç¬¬å››è¯¾ï¼šé«˜çº§é“¶è¡Œåˆçº¦ç³»ç»Ÿ
â”‚   â””â”€â”€ BigBank.sol
â””â”€â”€ README.md
```

## è¯¾ç¨‹å†…å®¹

### ç¬¬ä¸€è¯¾ (lession_1) - Go åŸºç¡€ç»ƒä¹ 
- **question_1**: Go è¯­è¨€åŸºç¡€è¯­æ³•ç»ƒä¹ 
- **question_2**: Go è¯­è¨€è¿›é˜¶æ¦‚å¿µç»ƒä¹ 
- **question_3**: Go è¯­è¨€å®æˆ˜åº”ç”¨

### ç¬¬äºŒè¯¾ (lession_2) - åŸºç¡€æ™ºèƒ½åˆçº¦
- **my_contract.sol**: ç®€å•çš„æ™ºèƒ½åˆçº¦ç¤ºä¾‹ï¼Œä»‹ç» Solidity åŸºç¡€è¯­æ³•å’Œæ¦‚å¿µ

### ç¬¬ä¸‰è¯¾ (lession_3) - é“¶è¡Œåˆçº¦
- **bank.sol**: åŸºç¡€é“¶è¡Œåˆçº¦ï¼Œå®ç°å­˜æ¬¾ã€å–æ¬¾ã€ä½™é¢æŸ¥è¯¢ç­‰åŠŸèƒ½

### ç¬¬å››è¯¾ (lession_4) - é«˜çº§é“¶è¡Œåˆçº¦ç³»ç»Ÿ â­

è¿™æ˜¯é¡¹ç›®çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„é“¶è¡Œåˆçº¦ç³»ç»Ÿï¼ŒåŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š

#### åˆçº¦æ¶æ„

1. **IBank æ¥å£** - å®šä¹‰é“¶è¡Œåˆçº¦çš„æ ‡å‡†æ¥å£
2. **Bank åˆçº¦** - åŸºç¡€é“¶è¡Œåˆçº¦ï¼Œå®ç° IBank æ¥å£
3. **BigBank åˆçº¦** - ç»§æ‰¿è‡ª Bankï¼Œæ·»åŠ é«˜çº§åŠŸèƒ½
4. **Admin åˆçº¦** - ç®¡ç†å‘˜åˆçº¦ï¼Œç”¨äºèµ„é‡‘ç®¡ç†

#### ä¸»è¦åŠŸèƒ½

##### Bank åˆçº¦åŠŸèƒ½
- âœ… å­˜æ¬¾åŠŸèƒ½ (`deposit()`)
- âœ… å–æ¬¾åŠŸèƒ½ (`withdraw()`)
- âœ… ä½™é¢æŸ¥è¯¢ (`getBalance()`)
- âœ… æ’è¡Œæ¦œåŠŸèƒ½ (`getTop3()`)
- âœ… è‡ªåŠ¨æ¥æ”¶ ETH (`receive()`)

##### BigBank åˆçº¦å¢å¼ºåŠŸèƒ½
- ğŸ”’ **æœ€å°å­˜æ¬¾é™åˆ¶**: å­˜æ¬¾é‡‘é¢å¿…é¡» > 0.001 ether
- ğŸ‘‘ **ç®¡ç†å‘˜è½¬ç§»**: æ”¯æŒè½¬ç§»ç®¡ç†å‘˜æƒé™
- ğŸ›¡ï¸ **æƒé™æ§åˆ¶**: ä½¿ç”¨ modifier è¿›è¡Œæƒé™éªŒè¯

##### Admin åˆçº¦åŠŸèƒ½
- ğŸ‘¤ **Owner ç®¡ç†**: æ‹¥æœ‰ç‹¬ç«‹çš„ Owner æƒé™
- ğŸ’° **èµ„é‡‘æå–**: å¯ä»¥ä»å…¶ä»–é“¶è¡Œåˆçº¦æå–èµ„é‡‘
- ğŸ”„ **æ¥å£è°ƒç”¨**: é€šè¿‡ IBank æ¥å£è°ƒç”¨å…¶ä»–åˆçº¦

#### æŠ€æœ¯ç‰¹æ€§

- **ç»§æ‰¿æœºåˆ¶**: BigBank ç»§æ‰¿è‡ª Bank åˆçº¦
- **æ¥å£å®ç°**: Bank å®ç° IBank æ¥å£
- **ä¿®é¥°ç¬¦ä½¿ç”¨**: ä½¿ç”¨ modifier è¿›è¡Œæƒé™æ§åˆ¶
- **äº‹ä»¶å¤„ç†**: æ”¯æŒ ETH è‡ªåŠ¨æ¥æ”¶
- **å®‰å…¨éªŒè¯**: å¤šé‡å®‰å…¨æ£€æŸ¥æœºåˆ¶

## ä½¿ç”¨æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Solidity ^0.8.0
- æ”¯æŒ EVM çš„åŒºå—é“¾ç½‘ç»œï¼ˆå¦‚ Ethereumã€Polygonã€BSC ç­‰ï¼‰
- Web3 å¼€å‘ç¯å¢ƒï¼ˆå¦‚ Remixã€Hardhatã€Truffle ç­‰ï¼‰

### éƒ¨ç½²æ­¥éª¤

1. **éƒ¨ç½² Admin åˆçº¦**
   ```solidity
   // éƒ¨ç½² Admin åˆçº¦ï¼Œè®°å½•åˆçº¦åœ°å€
   Admin adminContract = new Admin();
   ```

2. **éƒ¨ç½² BigBank åˆçº¦**
   ```solidity
   // éƒ¨ç½² BigBank åˆçº¦
   BigBank bigBank = new BigBank();
   ```

3. **è½¬ç§»ç®¡ç†å‘˜æƒé™**
   ```solidity
   // å°† BigBank çš„ç®¡ç†å‘˜è½¬ç§»ç»™ Admin åˆçº¦
   bigBank.transferAdmin(address(adminContract));
   ```

4. **æ¨¡æ‹Ÿç”¨æˆ·å­˜æ¬¾**
   ```solidity
   // ç”¨æˆ·å­˜æ¬¾ï¼ˆé‡‘é¢å¿…é¡» > 0.001 etherï¼‰
   bigBank.deposit{value: 0.002 ether}();
   ```

5. **æå–èµ„é‡‘åˆ° Admin åˆçº¦**
   ```solidity
   // Admin åˆçº¦çš„ Owner è°ƒç”¨
   adminContract.adminWithdraw(bigBank);
   ```

6. **æœ€ç»ˆèµ„é‡‘æå–**
   ```solidity
   // Owner å°† Admin åˆçº¦ä¸­çš„èµ„é‡‘æå–åˆ°è‡ªå·±çš„åœ°å€
   adminContract.withdrawAdminBalance();
   ```

### åˆçº¦äº¤äº’ç¤ºä¾‹

```javascript
// ä½¿ç”¨ Web3.js ä¸åˆçº¦äº¤äº’
const bigBank = new web3.eth.Contract(BigBankABI, bigBankAddress);
const admin = new web3.eth.Contract(AdminABI, adminAddress);

// å­˜æ¬¾
await bigBank.methods.deposit().send({
    from: userAddress,
    value: web3.utils.toWei('0.002', 'ether')
});

// è½¬ç§»ç®¡ç†å‘˜
await bigBank.methods.transferAdmin(adminAddress).send({
    from: deployerAddress
});

// æå–èµ„é‡‘
await admin.methods.adminWithdraw(bigBankAddress).send({
    from: ownerAddress
});
```

## å®‰å…¨è€ƒè™‘

- âœ… æƒé™éªŒè¯ï¼šæ‰€æœ‰å…³é”®æ“ä½œéƒ½æœ‰æƒé™æ£€æŸ¥
- âœ… é‡‘é¢éªŒè¯ï¼šå­˜æ¬¾é‡‘é¢æœ‰æœ€å°é™åˆ¶
- âœ… ä½™é¢æ£€æŸ¥ï¼šå–æ¬¾å‰æ£€æŸ¥åˆçº¦ä½™é¢
- âœ… åœ°å€éªŒè¯ï¼šç¡®ä¿åœ°å€æœ‰æ•ˆæ€§
- âœ… é‡å…¥æ”»å‡»é˜²æŠ¤ï¼šä½¿ç”¨ transfer è€Œé call

## å¼€å‘å»ºè®®

1. **æµ‹è¯•ä¼˜å…ˆ**: åœ¨éƒ¨ç½²åˆ°ä¸»ç½‘å‰ï¼ŒåŠ¡å¿…åœ¨æµ‹è¯•ç½‘è¿›è¡Œå……åˆ†æµ‹è¯•
2. **ä»£ç å®¡è®¡**: å»ºè®®è¿›è¡Œä¸“ä¸šçš„æ™ºèƒ½åˆçº¦å®‰å…¨å®¡è®¡
3. **å‡çº§æœºåˆ¶**: è€ƒè™‘æ·»åŠ åˆçº¦å‡çº§æœºåˆ¶
4. **äº‹ä»¶è®°å½•**: å¯ä»¥æ·»åŠ æ›´å¤šäº‹ä»¶æ¥è®°å½•é‡è¦æ“ä½œ
5. **Gas ä¼˜åŒ–**: ä¼˜åŒ–åˆçº¦ä»£ç ä»¥å‡å°‘ Gas æ¶ˆè€—

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ é¡¹ç›®ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‰è¯·è¿›è¡Œå……åˆ†çš„å®‰å…¨æµ‹è¯•å’Œå®¡è®¡ã€‚
